<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/user.css">
  <title>Recruiter Page</title>
</head>
<!-- modal creation fiche de poste-->
<!-- pour le siren de l'ogrnaisation il faut recuperer l'organisation du créateur de la fiche de poste -->
<div class="modal fade" id="ModalCreationFicheDePoste" tabindex="-1" aria-labelledby="cfdpModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-light">
      <div class="modal-header">
        <h5 class="modal-title" id="cfdpModalLabel">Nouvelle fiche de poste</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
      </div>
      <div class="modal-body">
        <form method="post" action="/recruiter/add-fdp">
          <div class="mb-3">
            <label for="intitule" class="form-label">Intitulé du poste</label>
            <input type="text" class="form-control" id="intitule" name="intitule" required>
          </div>
          <div class="mb-3">
            <label for="statutPoste" class="form-label">Statut du poste</label>
            <select class="form-select" id="statutPoste" name="statutPoste" required>
              <option value="" disabled selected>Choisir le statut</option>
              <option value="Cadre">Cadre</option>
              <option value="ETAM">ETAM</option>
              <option value="Stagiaire">Stagiaire</option>
              <option value="Alternant">Alternant</option>
              <option value="Employe">Employe</option>
              <option value="interimaire">interimaire</option>
              <option value="vacataire">vacataire</option>
              <option value="autre">autre</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="responsable" class="form-label">Responsable Hierarchique</label>
            <input type="text" class="form-control" id="responsable" name="responsable"></input>
          </div>
          <div class="row mb-3">
            <div class="col-6">
              <label for="Rythme" class="form-label">Rythme</label>
              <input type="text" class="form-control" id="Rythme" name="Rythme">
            </div>
            <div class="col-6">
              <label for="salaire" class="form-label">Salaire</label>
              <input type="number" class="form-control" id="salaire" name="salaire"></input>
            </div>
          </div>
          <div class="mb-3">
            <label for="description" class="form-label">Déscription</label>
            <textarea class="form-control" id="description" name="description" rows="5"></textarea>
          </div>
          <div class="mb-3">
            <label for="lieu" class="form-label">Lieu</label>
            <input type="text" class="form-control" id="lieu" name="lieu">
          </div>
          <div class="mb-3">
            <label for="typeMetier" class="form-label">Type de metier</label>
            <input type="text" class="form-control" id="typeMetier" name="typeMetier">
          </div>
          <button type="submit" class="btn btn-primary">Créer l'offre</button>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- modal creation offre-->
<div class="modal fade" id="ModalCreationOffre" tabindex="-1" aria-labelledby="offreModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-light">
      <div class="modal-header">
        <h5 class="modal-title" id="offreModalLabel">Nouvelle offre</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
      </div>
      <div class="modal-body">
        <form method="post" action="/recruiter/add-offre">
          <div class="mb-3">
            <label for="intitule" class="form-label">Intitulé du poste</label>
            <select class="form-select" id="intitule" name="intitule" required>
              <option value="" disabled selected>Choisir la fiche de poste</option>
              <% fiches.forEach((fiche)=> { %>
                <option value="<%= fiche.numero_fiche %>">
                  <%= fiche.intitule %>
                </option>
                <% }) %>
            </select>
          </div>
          <div class="mb-3">
            <label for="piece" class="form-label">Pieces demandées</label>
            <input type="text" class="form-control" id="piece" name="piece" placeholder="CV, lettre de motivation ..."
              required></input>
          </div>
          <div class="mb-3">
            <label for="nbPiece" class="form-label">Nombre de pieces demandées </label>
            <input type="number" class="form-control" id="nbPiece" name="nbPiece" required>
          </div>
          <div class="mb-3">
            <label for="dateValidite" class="form-label">Date de validité</label>
            <input type="date" class="form-control" id="dateValidite" name="dateValidite" required></input>
          </div>
          <button type="submit" class="btn btn-primary">Créer l'offre</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- body -->

<body class="d-flex flex-column min-vh-100">

  <!-- HEADER -->
  <header class="d-flex justify-content-between bg-primary text-white px-5 p-2 align-items-center">
    <img src="img/logoTempo.png" id="logoSite" alt="logo" />
    <form id="searchbar" class="d-flex gap-2 align-items-center w-50"
      onsubmit="event.preventDefault(); submitWithSearch();">
      <input type="text" placeholder="Search..." name="search" class="form-control" id="mainSearch" />
      <button class="btn btn-primary" type="submit">Search</button>
    </form>
    <div class="d-flex gap-2 align-items-center">
      <span>username</span>
      <!-- <button class="btn btn-primary">Logout</button> -->
      <a href="/"><button class="btn btn-primary">Logout</button></a>

    </div>
  </header>
  <!-- contenu de la page -->
  <div class="row flex-grow-1 g-0">
    <!-- Nav (filtres) -->
    <nav class="bg-dark text-white p-3 col-sm-4 col-md-3 col-lg-2">
      <div id="roleChoice" class="w-100 d-inline-flex justify-content-center gap-2 pt-2 pb-5">
        <a href="users" class="btn btn-primary w-50 text-center align-self-start">Utilisateur</a>
        <a href="admins" class="btn btn-primary w-50 text-center align-self-start">Admin</a>
      </div>
      <div id="filtre" class="d-flex flex-column gap-2 w-100">
        <div id="boutonCreation" class="d-flex gap-2 w-100">
          <button class="btn btn-primary w-50" id="addFicheDePoste" data-bs-toggle="modal"
            data-bs-target="#ModalCreationFicheDePoste">Ajouter une fiche de poste</button>
          <button class="btn btn-primary w-50" id="addOffer" data-bs-toggle="modal"
            data-bs-target="#ModalCreationOffre">Ajouter une offre</button>
        </div>
        <div id="boutonSee" class="d-flex gap-2 w-100">
          <button class="btn btn-primary w-50" id="seeFicheDePoste">Voir mes fiches de poste</button>
          <button class="btn btn-primary w-50" id="seeOffre">Voir mes offres</button>
        </div>
        <form id="filtreForm" class="d-flex flex-column gap-2" method="get">
          <label for="offre">Filtrer par offre de poste: </label>
          <select name="offre" id="offre">
            <option value="all">Toutes les offres</option>
            <% offres.forEach((offre)=> { %>
              <option value="<%= offre.numero_offre %>">
                <%= offre.intitule %>
              </option>
              <% }) %>
          </select>
          <button class="btn btn-primary" type="submit">Filtrer</button>
        </form>
      </div>
    </nav>

    <!-- main -->
    <main class="flex-grow-1 p-3 col-sm-8 col-md-9 col-lg-10">
      <div id="CandidatureItem"
        class="w-100 bg-dark p-2 rounded text-white d-flex flex-column justify-content-between px-4">
        <div id="CandidatureTitle" class="row w-100 m-1 align-items-center">
          <p id="intitulé" class="col">intitulé</p>
          <p id="nom1" class="col">statut poste</p>
          <p " class="col">responsable</p>
          <p  class="col">rythme</p>
          <p  class="col">salaire</p>
          <p  class="col">lieu</p>
          <p  class="col">type métier</p>


          <button class="btn btn-primary col mx-2">Telecharger</button>
          <button class="btn btn-primary col mx-2">Voir offre</button>
        </div>
      </div>


      <div>
        <!-- <% offres.forEach((offre)=> { %>
          <option value="<%= offre.numero_offre %>">
            <%= offre.intitule %>
          </option>
          <% }) %> -->

            <table class="table table-striped">
              <thead class="thead-dark">
                <tr>
                  <th>intitulé</th>
                  <th>statut_poste</th>
                  <th>responsable</th>
                  <th>rythme</th>
                  <th>salaire</th>
                  <th>lieu</th>
                  <th>TypeMetier</th>

                </tr>
              </thead>
              <tbody>
                <% offres.forEach((offre)=> { %>
                  <tr>
                    <td>
                      <%= offre.intitule%>
                    </td>
                    <td>
                      <%= offre.statut_poste%>
                    </td>
                    <td>
                      <%= offre.responsable%>
                    </td>
                    <td>
                      <%= offre.rythme%>
                    </td>
                    <td>
                      <%= offre.salaire%>
                    </td>
                    <td>
                      <%= offre.lieu%>
                    </td>
                    <td>
                      <%= offre.TypeMetier%>
                    </td>

                  </tr>
                  
                    
                      <!-- <%= offre.description%> -->
                    

                  
                  <% }) %>
              </tbody>
            </table>





      </div>

      
  </div>
  </div>


  </main>
  </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

</html>